{"componentChunkName":"component---src-templates-blog-template-js","path":"/securityjwtlogin-1/","result":{"data":{"cur":{"id":"b524e060-b47b-559d-8bb2-672a204fe189","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---1span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---1span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   1span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 1</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0ff초기-프로젝트-설정span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ff%EC%B4%88%EA%B8%B0-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%84%A4%EC%A0%95span\" aria-label=\"span stylebackground color f5f0ff초기 프로젝트 설정span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[초기 프로젝트 설정]</span></h1>\n<hr>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4dependencies-and-versionspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4dependencies-and-versionspan\" aria-label=\"span stylebackground color ddffe4dependencies and versionspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>Dependencies and Version</span></h2>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABqElEQVQoz21T2XKcMBDkM5zlFhIICR2wGFhnbVeul/z//3RqhgJnEz80haSe1nQzJLdfN4RXDx0HvLx+Q2s8nrIKadk84FIIxmf7X/L6PE+ksRBao5Qtms6ibDoUokVWyQcBWue1wiUXD2LErSTVKOYkyliUahcoRYdLUUMHD9EaFicR6kBpBz/PaGyLtJDISsVnflqwfn1DuK5ojUPSDR42TCilYlSSuu1YjC6hTp7yCtpGLPc73BqhnGHUSjOPQHXETVTvEKYFddsjq+VJOGwTqEPKNk4bOh0x/vAYv3uuISFyw3FQhqRKrY7PG3o3Qg8B/RB38DoyUSgLtwbEnxZy6JHl7RkJ4XCTEJlusX7i4s4GUNcfGDhXep/WDevvCe7mUEuy3J8ujg+VkLXOely3F2z3d7Y/xBmOMM4Y4pUt02Xzcsf8vmDYPIQ0kNqeF5MOC9KDDqQxPDZFo5DVj7O2CwbEeUMfArQLaHvPuRLIFdVyhses5dWeQy4U0ko8DPIxNm66wiz2Y9D/GviDm6T/bO74pEMb8fy2wUweQhmkVfPfX0OCfwB6bDw1u6tctwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"start-spring-io\"\n        title=\"start-spring-io\"\n        src=\"/static/c7a5dc65a364363fa2b5113daddddc6d/37523/spring-io.png\"\n        srcset=\"/static/c7a5dc65a364363fa2b5113daddddc6d/e9ff0/spring-io.png 180w,\n/static/c7a5dc65a364363fa2b5113daddddc6d/f21e7/spring-io.png 360w,\n/static/c7a5dc65a364363fa2b5113daddddc6d/37523/spring-io.png 720w,\n/static/c7a5dc65a364363fa2b5113daddddc6d/302a4/spring-io.png 1080w,\n/static/c7a5dc65a364363fa2b5113daddddc6d/07a9c/spring-io.png 1440w,\n/static/c7a5dc65a364363fa2b5113daddddc6d/6fcb6/spring-io.png 1523w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>spring boot 의 경우 3.0.0 은 에러가 발생합니다. 따라서 2.7.6을 선택해줍니다. (되도록 SNAPSHOT은 피합니다.)</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ff기본-설정span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ff%EA%B8%B0%EB%B3%B8-%EC%84%A4%EC%A0%95span\" aria-label=\"span stylebackground color f1f8ff기본 설정span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>기본 설정</span></h3>\n<br>\n<p>Dependency 를 추가할 때 설명이 적혀있지만 한 번 가볍게 살펴보겠습니다.</p>\n<ul>\n<li>Spring Web : Web 관련 Dependency</li>\n<li>Spring Boot DevTools : LiveReload 기능 제공</li>\n<li>Lombok : Annotation 을 통해 Getter, Setter, Constructor 등을 사용가능 하도록 제공</li>\n<li>Spring Security : 인증, 인가 등의 보안을 처리하기에 편리하도록 제공하는 Framework</li>\n<li>MyBatis Framework : Persistence Framework로 DB에 접근할 Connection Pool 등을 담당하고 SQL을 준비할 프레임워크</li>\n<li>MySQL Driver : MySQL 연결할 Driver</li>\n<li>Validation : 유효성 검사 기능 -> 해당 프로젝트에서 사용하지 않을수도 있습니다.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ff추가-dependenciesspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ff%EC%B6%94%EA%B0%80-dependenciesspan\" aria-label=\"span stylebackground color f1f8ff추가 dependenciesspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>추가 Dependencies</span></h3>\n<br>\n<p>start.spring.io 에서 권장하는 dependency 외에 추가로 dependency들을 추가해줍니다.</p>\n<ul>\n<li>commons-dbcp2 : DataBase Connection Pool 관련 설정</li>\n<li>jjwt-api &#x26; jjwt-impl &#x26; jjwt-jackson : JWT 관련 설정</li>\n</ul>\n<br>\n<p>최종적으로 아래와 같은 build.gradle 이 만들어집니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"gradle\"><pre class=\"language-gradle\"><code class=\"language-gradle\">    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\n    implementation &#39;org.mybatis.spring.boot:mybatis-spring-boot-starter:2.3.0&#39;\n\n    compileOnly &#39;org.projectlombok:lombok&#39;\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\n    runtimeOnly &#39;com.mysql:mysql-connector-j&#39;\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\n    // DataSource Dependency\n    // https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-dbcp2&#39;, version: &#39;2.7.0&#39;\n    // Jwt Dependency\n    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-api\n    implementation group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt-api&#39;, version: &#39;0.11.2&#39;\n    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-impl\n    runtimeOnly group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt-impl&#39;, version: &#39;0.11.2&#39;\n    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-jackson\n    runtimeOnly group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt-jackson&#39;, version: &#39;0.11.2&#39;\n\n\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\n    testImplementation &#39;org.springframework.security:spring-security-test&#39;</code></pre></div>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4application-설정span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4application-%EC%84%A4%EC%A0%95span\" aria-label=\"span stylebackground color ddffe4application 설정span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>Application 설정</span></h2>\n<br>\n<p>실행에 앞서 application 설정을 진행합니다.<br>\n<span style='color: #FF0000'>application.yml</span> 에 들어갈 정보</p>\n<ul>\n<li>port : 9999</li>\n<li>context-root : /jwt</li>\n<li>DataBase 설정 및 MySQL Driver</li>\n<li>MyBatis 설정 : alias, mapper 위치</li>\n<li>logging 설정</li>\n</ul>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9999</span>\n  <span class=\"token comment\"># context-root</span>\n  <span class=\"token key atrule\">servlet</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">context-path</span><span class=\"token punctuation\">:</span> /jwt\n\n<span class=\"token comment\"># DataBase Settings</span>\n<span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">datasource</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">hikari</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">maximum-pool-size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">connection-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span>\n      <span class=\"token key atrule\">connection-init-sql</span><span class=\"token punctuation\">:</span> SELECT 1\n      <span class=\"token key atrule\">validation-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2000</span>\n      <span class=\"token key atrule\">minimum-idle</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n      <span class=\"token key atrule\">idle-timeout</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600000</span>\n      <span class=\"token key atrule\">max-lifetime</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1800000</span>\n      <span class=\"token key atrule\">auto-commit</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token comment\"># MySQL Setting</span>\n    <span class=\"token key atrule\">driver-class-name</span><span class=\"token punctuation\">:</span> com.mysql.cj.jdbc.Driver\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>mysql<span class=\"token punctuation\">:</span>//localhost<span class=\"token punctuation\">:</span>3306/security<span class=\"token punctuation\">?</span>serverTimezone=UTC<span class=\"token important\">&amp;useUniCode=yes&amp;characterEncoding=UTF-</span><span class=\"token number\">8</span>\n    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> junhyxxn\n    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token number\">9999</span>\n    <span class=\"token comment\"># DataSource</span>\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> org.apache.commons.dbcp2.BasicDataSource\n\n<span class=\"token comment\">#MyBatis Setting</span>\n<span class=\"token key atrule\">mybatis</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">type-aliases-package</span><span class=\"token punctuation\">:</span> com.home.vo.<span class=\"token important\">**</span>\n  <span class=\"token key atrule\">mapper-locations</span><span class=\"token punctuation\">:</span> classpath<span class=\"token punctuation\">:</span>/mapper/<span class=\"token important\">*.xml</span>\n\n<span class=\"token comment\">#log level Setting</span>\n<span class=\"token key atrule\">logging.root</span><span class=\"token punctuation\">:</span> info\n<span class=\"token key atrule\">logging.level.com.jwt</span><span class=\"token punctuation\">:</span> debug</code></pre></div>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4실행span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4%EC%8B%A4%ED%96%89span\" aria-label=\"span stylebackground color ddffe4실행span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>실행</span></h2>\n<br>\n<ul>\n<li>초기 화면</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfUlEQVQoz42Sy04UQRSGe+ET+Ab4XiwUwxNogibs3MkL+ASiuEMTEUzwtsC9MxFNCIwjOlOnLl3VXUNPz3ykemAYcQQXX/6uU13/+euSaa1JiEijSqlGiyLgvSfPc4qiwDmHtXb632RN0otxIps1TItarTabmy/Z3tnh/YeP7O6+4/XWG/b2PvN1fx9jTNNURDVmyXS2SXa5W1803V89Dg47dI97dLrHfD84pC8GbXNCOWhwvrw64XlK4zxFrCgHJ5xUNaMxjIFhPaaqR02tGtaEWF2z5aQiiDaIDWgXsHmJ9RPcLCFi8vDHVucmVCKU3kIdYOiBQcoGVJcYwihOz3CuoRJN6YS3Lcfi+oCljcjtZ5G7G5HlFxNN4zvPI4tPIyuvCvpK/2U6NewpTR0UTz4FsnuQPYRsBW6swsIa3HwE2YMz7sOtxzW/+xrzL8NUTJM/e5rWkaHdmZC+v5zRPrqoffthppcy1/B8whohuOvxVmbMrniHSdV/Mi/hKe6BKkRaur4kAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"초기화면\"\n        title=\"초기화면\"\n        src=\"/static/7fea86ca64be8e95cb1b8e60439eea44/17602/init-page.png\"\n        srcset=\"/static/7fea86ca64be8e95cb1b8e60439eea44/e9ff0/init-page.png 180w,\n/static/7fea86ca64be8e95cb1b8e60439eea44/f21e7/init-page.png 360w,\n/static/7fea86ca64be8e95cb1b8e60439eea44/17602/init-page.png 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>위와 같이 왠지 모를 로그인 창이 보이는 것을 알 수 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAY0lEQVQI132NWwoFIQxDXY/Q4lvr/veVIYVeLvMxH4fUNKmp945/WmsYY/gcKiJQVagIcs6fpPexUFJr/R0NLzLhE+bi07T3xloLVMIl32bmJeoxw70XpRT3zjmeid6c03vkAWnaXv8n9ziJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"초기화면 로그 결과\"\n        title=\"초기화면 로그 결과\"\n        src=\"/static/68e98d48e29032413aa7a02d08a805cc/37523/init-log.png\"\n        srcset=\"/static/68e98d48e29032413aa7a02d08a805cc/e9ff0/init-log.png 180w,\n/static/68e98d48e29032413aa7a02d08a805cc/f21e7/init-log.png 360w,\n/static/68e98d48e29032413aa7a02d08a805cc/37523/init-log.png 720w,\n/static/68e98d48e29032413aa7a02d08a805cc/302a4/init-log.png 1080w,\n/static/68e98d48e29032413aa7a02d08a805cc/12470/init-log.png 1311w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>로그를 확인해보면</li>\n<li>Spring Security 의 자동설정 관련된 UserDetailsServiceAutoConfiguration 으로 인해 발생된 페이지임을 알 수 있다.</li>\n<li>Username 에는 user, password에는 로그에 기록된 값을 입력하게 되면 / 페이지로 이동하게 된다.(현재는 기본 페이지가 없으니 당연히 404 Page 로 간다)</li>\n</ul>\n<p>💥 여기까지 정상적으로 실행됐다면, Security가 제대로 적용된 것입니다.</p>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffconfigurationspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffconfigurationspan\" aria-label=\"span stylebackground color f1f8ffconfigurationspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>Configuration</span></h3>\n<br>\n<p>매번 로그를 확인해 비밀번호 입력하기 싫으니 설정을 추가로 진행해줍니다.</p>\n<p>잠시 위에서 확인했던 UserDetailsServiceAutoConfiguration은 Spring Boot의 Security 설정 파일인 <br>\n<span style='color: #FF0000'>SpringBootWebSecurityConfiguration</span> 클래스에서 설정이 진행되는데, <br>\n<span style='color: #FF0000'>SpringBootWebSecurityConfiguration</span> 는 <span style='color: #0000FF'>WebSecurityConfigurerAdapter</span> 가 있다면 그 설정 값을 그대로 쓰게 됩니다. <br>\n⭐ 즉, <span style='color: #0000FF'>WebSecurityConfigurerAdapter</span>를 상속받아 설정을 작성하면 Custom Configuration을 이용할 수 있습니다. <br></p>\n<p><br><br></p>\n<h4 id=\"span-stylebackground-color-fff5b1securityconfigspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1securityconfigspan\" aria-label=\"span stylebackground color fff5b1securityconfigspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>SecurityConfig</span></h4>\n<br>\n<ul>\n<li>기본적인 설정만 진행하고 우선 편의상 모든 request의 접근 제한을 해제한다.</li>\n<li>@EnableWebSecurity : @Configuration + 추가 설정</li>\n<li>@EnableGlobalMethodSecurity : @PreAuthorize, @PostAuthorize 사용을 위해 설정합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpMethod</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>method<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableGlobalMethodSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>builders<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>builders<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableWebSecurity</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">WebSecurityConfigurerAdapter</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SessionCreationPolicy</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@EnableWebSecurity</span> <span class=\"token comment\">// @Configuration + 추가 몇몇 설정</span>\n<span class=\"token annotation punctuation\">@EnableGlobalMethodSecurity</span><span class=\"token punctuation\">(</span>prePostEnabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Method 단위로 @PreAuthorize, @PostAuthorize 사용 가능하도록 설정</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// web 설정</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WebSecurity</span> web<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        web<span class=\"token punctuation\">.</span><span class=\"token function\">ignoring</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>OPTIONS<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/favicon.ico\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        http\n                <span class=\"token comment\">// CORS, CSRF 설정</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">cors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">csrf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n                <span class=\"token comment\">// Session 설정 -> JWT 방식 로그인 구현 -> StateLess</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">sessionManagement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sessionCreationPolicy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionCreationPolicy</span><span class=\"token punctuation\">.</span>STATELESS<span class=\"token punctuation\">)</span>\n\n                <span class=\"token comment\">// request의 resource 접근 제한 설정</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">authorizeHttpRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>🎯 설정이 정상적으로 성공했다면 아까와 달리 login 화면이 보이지 않습니다.<br>\n<br></p>\n<p>🌈 이것으로 기본 설정은 끝났습니다. 이제 본격적으로 Security + JWT 로그인을 구현해보겠습니다.</p>\n<br>\n<p>🌈 모든 코드는 <a href=\"https://github.com/JunHyxxn/SecurityJwtLogin\">junhyxxn GitHub</a>에서 확인할 수 있습니다!!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4dependencies-and-versionspan\"><span style='background-color: #ddffe4'>Dependencies and Version</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-f1f8ff%EA%B8%B0%EB%B3%B8-%EC%84%A4%EC%A0%95span\"><span style='background-color: #f1f8ff'>기본 설정</span></a></li>\n<li><a href=\"#span-stylebackground-color-f1f8ff%EC%B6%94%EA%B0%80-dependenciesspan\"><span style='background-color: #f1f8ff'>추가 Dependencies</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4application-%EC%84%A4%EC%A0%95span\"><span style='background-color: #ddffe4'>Application 설정</span></a></p>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4%EC%8B%A4%ED%96%89span\"><span style='background-color: #ddffe4'>실행</span></a></p>\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffconfigurationspan\"><span style='background-color: #f1f8ff'>Configuration</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1securityconfigspan\"><span style='background-color: #fff5b1'>SecurityConfig</span></a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"SecurityJwtLogin - 1 [초기 프로젝트 설정]  Dependencies and Version  spring boot 의 경우 3.0.0 은 에러가 발생합니다. 따라서 2.7.6을 선택해줍니다. (되도록 SNAPSHOT은 피합니다.)  기본 설정 Dependency 를 추가할 때 설명이 적혀있지만 한 번 가볍게 살펴보겠습니다. Spring Web : Web 관련 Dependency Spring Boot DevTools : LiveReload 기능 제공 Lombok : Annotation 을 통해 Getter, Setter, Constructor 등을 사용가능 하도록 제공 Spring Security : 인증, 인가 등의 보안을 처리하기에 편리하도록 제공하는 Framework MyBatis Framework : Persistence Framework로 DB에 접근할 Connection Pool 등을 담당하고 SQL을 준비할 프레임워크 MySQL Driver : MySQL…","frontmatter":{"date":"December 01, 2022","title":"SecurityJwtLogin - 1 [프로젝트 설정]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"🔐"},"fields":{"slug":"/securityjwtlogin-1/"}},"next":{"id":"45b7be86-c7ff-58c8-840b-768519a67392","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---0span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---0span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   0span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 0</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0ff개요---spring-security-frameworkspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ff%EA%B0%9C%EC%9A%94---spring-security-frameworkspan\" aria-label=\"span stylebackground color f5f0ff개요   spring security frameworkspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[개요 - Spring Security Framework]</span></h1>\n<p><br><br></p>\n<p>Spring Security를 적용한 Jwt 기반 로그인 프로젝트 - 0</p>\n<br>\n<p>프로젝트 시작 전 가볍게 스프링 시큐리티와 JWT 로그인 방식을 알아보고 시작하겠습니다.</p>\n<p><br><br></p>\n<hr>\n<h2 id=\"span-stylebackground-color-ddffe4-spring-security-frameworkspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4-spring-security-frameworkspan\" aria-label=\"span stylebackground color ddffe4 spring security frameworkspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #ddffe4\">🔒 Spring Security Framework</span></h2>\n<p><br><br></p>\n<p>Spring Security는 Spring 기반의 Application의 보안을 담당하는 Framework 이다.<br>\n인증(Authentication)과 인가(Authorization)에 대한 처리를 Filter 기반으로 처리를 해주며 많은 Filter가 제공되어 많은 보안 관련 옵션들을 개발자가 하나씩 작성하지 않고 쉽게 처리할 수 있는 장점이 있습니다.</p>\n<p><br><br></p>\n<hr>\n<h3 id=\"span-stylebackground-color-f1f8ffauthentication--authorizationspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffauthentication--authorizationspan\" aria-label=\"span stylebackground color f1f8ffauthentication  authorizationspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f1f8ff\">Authentication &#x26; Authorization</span></h3>\n<p><br><br></p>\n<p>1️⃣ Authentication - 인증</p>\n<ul>\n<li>접속하려는 사용자가 본인인지 확인하는 인증 절차</li>\n</ul>\n<p>2️⃣ Authorization - 인가 / 권한</p>\n<ul>\n<li>인증된 사용자가 요청한 자원에 접근 가능한지를 결정하는 절차</li>\n<li>주로 권한을 통해 접근 가능 여부를 판단한다</li>\n</ul>\n<p><br><br></p>\n<blockquote>\n<p>Spring Security에서는 이러한 인증과 인가를 위해 Principal을 아이디로, Credential을 비밀번호로 사용하는 Credential 기반의 인증 방식을 사용한다.</p>\n<ul>\n<li>Principal(접근 주체): 보호받는 Resource에 접근하는 대상</li>\n<li>Credential(비밀번호): Resource에 접근하는 대상의 비밀번호</li>\n</ul>\n</blockquote>\n<p><br><br></p>\n<hr>\n<h3 id=\"span-stylebackground-color-f1f8fffilter-기반의-spring-securityspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8fffilter-%EA%B8%B0%EB%B0%98%EC%9D%98-spring-securityspan\" aria-label=\"span stylebackground color f1f8fffilter 기반의 spring securityspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f1f8ff\">Filter 기반의 Spring Security</span></h3>\n<p><br><br></p>\n<p>Spring Security Framework는 Filter 기반이기 때문에 Interceptor와는 다음과 같은 차이도 존재합니다.</p>\n<h4 id=\"span-stylebackground-color-fff5b1spring-framework의-전반적인-흐름span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1spring-framework%EC%9D%98-%EC%A0%84%EB%B0%98%EC%A0%81%EC%9D%B8-%ED%9D%90%EB%A6%84span\" aria-label=\"span stylebackground color fff5b1spring framework의 전반적인 흐름span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Spring Framework의 전반적인 흐름</span></h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC80lEQVQoz1WS3WubVRzHnz9gCuJA8U6ZN7ILEb0UX+79B3ZdLVhlIl5v3swxm5qGuk46HWgcW5HYKe1M1rRr05rZZiPt2jVNC7GlyZOkeWvzcs7zcs75yJPChgc+cDjw+3D4/r7Wl4OD1u+3b1uNej2+VyhQrVSU53lGeg4t2aHWO6IjuwhHIFoVevUDeo1S//6MshFHFbq9tmcBfaR05rrdHlJK5WuF5zq0y0VKeztIRxAcvZFAr9yCtT9hJwW5hRO2AxaNaJWxFmZjfaFSfrI/ZbTyAWc3D6MRGL+Ga9t0pcBkpzlO/kQtfp3DmWvI+RuwOYvOLxvyKUTLNta777xmXQzFrE7Pm2u0NUL4SgNufhu+HUaHv0NXqwRvPLyDlxjDSUWRq3dQK7/B+gyszcD6XUTTxjpz9sNTlwdffH4lp2d/TkImp5SPxgmEoRGIRGjt7lJtNvETV+GXIfTMCH76FtwbozYVwrk7CvM/IBpFrLNvvX/6/LnXX/p7009OTDssrwvVaDfpPtlEDQ+jwmF6+/t0HUkvPs6/kY85nroCG3H0aozjpUm6y5OozBSyZWO9+sYHp0Y/P/3cgy0/eTV2yFK2rdrBVnNbFC5c4ODSJVr5PNVGA/HXGPXxAcQfV9DZaTqLv9JJ3eR4IYqTnjwRvvn2e6+cP3fm5aUNlZyIQ2rNVW3ZQW7nMKEQOhx+luFSFGIXMXMTdNMxmvHrtO7doBn/EXE/igwytKwp64WPbKt46M09LmgqdaWCWWcnyDAEkVH8chnPaHTpIXo/hTlIQzENpQf/Q7SrgdDq18ZoL0nwD+MrL9hyIBwZwUQiuKUSwnPRhShm93vY+hr5z6dU7w9RWxzCWf3MsPYFovnEPC2263nJoDDK9/s9dPM5+OZyvzrOQRHX92DvJgTC7FewOsDRwgDtxQHIfAKZQSPr6zwVep6X1FqjlVLKGGSrjvsog5N9hGgfITyJ03yMW1vBKc/j2nFE8QTXThjXTtDr2OY/PvwnFaOyv5YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"spring-flow\"\n        title=\"spring-flow\"\n        src=\"/static/532faf7345ec8a0f5f6942ec1c1f8baf/37523/spring-flow.png\"\n        srcset=\"/static/532faf7345ec8a0f5f6942ec1c1f8baf/e9ff0/spring-flow.png 180w,\n/static/532faf7345ec8a0f5f6942ec1c1f8baf/f21e7/spring-flow.png 360w,\n/static/532faf7345ec8a0f5f6942ec1c1f8baf/37523/spring-flow.png 720w,\n/static/532faf7345ec8a0f5f6942ec1c1f8baf/302a4/spring-flow.png 1080w,\n/static/532faf7345ec8a0f5f6942ec1c1f8baf/21b4d/spring-flow.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 그림과 같이</p>\n<ul>\n<li>\n<p>Interceptor의 경우,</p>\n</li>\n<li>\n<p><strong><span style='color: #FF0000'>Dispatcher Servlet이 Controller를 호출하기 전/후로</span></strong> preHandler(), postHandler() 를 통해</p>\n</li>\n<li>\n<p>전처리, 후처리 작업을 수행한다</p>\n</li>\n<li>\n<p>Filter의 경우는,</p>\n</li>\n<li>\n<p><strong><span style='color: #FF0000'>Dispatcher Servlet에 요청이 들어가기 전</span></strong>, 응답을 만든 후 Filter 로직이 수행된다</p>\n</li>\n</ul>\n<p><br><br></p>\n<h4 id=\"span-stylebackground-color-fff5b1filter-기반의-spring-security-architecturespan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1filter-%EA%B8%B0%EB%B0%98%EC%9D%98-spring-security-architecturespan\" aria-label=\"span stylebackground color fff5b1filter 기반의 spring security architecturespan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Filter 기반의 Spring Security Architecture</span></h4>\n<p><br><br></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACM0lEQVQ4y4VUaY/aMBDl//+dfqiqqkWrrTgCVcRushwhB4acSwg5nDt5lZ0loIW2I1nj2JPneTPPHrieB93YwbJtHA4mEkrBrG1b/M8exQzKqkJRFMiyHGmaoqqqfjNMMljHCI4fwb4Z7+ekB/sMOnh0ctM03Bumh/GLgvmbDkFSIUgaJq8qZM1E07YcrGlaPr98D9qPyR2dpkZVln+ly4Ae2eACxmhTmiAIY06ROEe8BzGKPEeUUJ6tSixoewfHc7d+OkcwTAfEcrl3j8EV0HFcKIqCtUogSDomL1u8aRZSmsDzQ8xkHcOxiKeZBNU8oshSbImFH7Mlnn6vMZyvMHszuho+olyXRUetrq8NAOCfTkjiGDVbv8TWNW9mX0NmZVXDsH2sDQsr7QBpY4B4IeK0A17qNp7FDZ7FNS/FJZFTmMDyfJiuj5hmV8A4zfFL2uPbZImvIwlDUcVoacN8D/l+lGT85yCi/PAOsMFiQzBabDF51bBzb2rI0IW1jZG8x/epjLG8x0zxuA4v2TBqTFJszijGH9Rvhd4DJmmO6fKA6crEWCYQViamK4sLmZnrn/FlOMVPQUZEMzRN3YPdSm/QebYAVHWLqulGXlTIihJV3YmceSYpfUd4Y26zuh19hlmWYbNeQVE20DUNSZIgTSnKsuxPV4gD3fSY6u+A7oRNKcVUmGM+FyGKC2y3KgghCMOwDz7HKW/eNbN/3JSyrLE/BNiRALt9gCjO72h9fmUeXds/kqp/vjG2gd8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Security-Architecture\"\n        title=\"Security-Architecture\"\n        src=\"/static/1e635c91142475ec4f4825ef585185bb/37523/security-architecture.png\"\n        srcset=\"/static/1e635c91142475ec4f4825ef585185bb/e9ff0/security-architecture.png 180w,\n/static/1e635c91142475ec4f4825ef585185bb/f21e7/security-architecture.png 360w,\n/static/1e635c91142475ec4f4825ef585185bb/37523/security-architecture.png 720w,\n/static/1e635c91142475ec4f4825ef585185bb/302a4/security-architecture.png 1080w,\n/static/1e635c91142475ec4f4825ef585185bb/21b4d/security-architecture.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<ul>\n<li>Security의 Architecture는 위 그림과 같은데,</li>\n<li>위 과정이 Dispatcher Servlet 으로 들어가기 전에 주로 처리된다고 보면 됩니다.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ff그-외-주요-개념span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ff%EA%B7%B8-%EC%99%B8-%EC%A3%BC%EC%9A%94-%EA%B0%9C%EB%85%90span\" aria-label=\"span stylebackground color f1f8ff그 외 주요 개념span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>그 외 주요 개념</span></h3>\n<p><br><br></p>\n<h4 id=\"span-stylebackground-color-fff5b1securitycontextholderspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1securitycontextholderspan\" aria-label=\"span stylebackground color fff5b1securitycontextholderspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>SecurityContextHolder</span></h4>\n<ul>\n<li>SecurityContextHolder는 보안 주체의 세부 정보를 포함하여 응용프래그램의 현재 보안 컨텍스트에 대한 세부 정보가 저장됩니다.</li>\n<li>SecurityContext를 가져올 수 있습니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1securitycontextspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1securitycontextspan\" aria-label=\"span stylebackground color fff5b1securitycontextspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>SecurityContext</span></h4>\n<ul>\n<li>Authentication 을 저장하는 역할을 하며, 역으로 SecurityContext에서 현재 접근중인 사용자 객체(Authentication)를 가져올 수 있습니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1authenticationspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1authenticationspan\" aria-label=\"span stylebackground color fff5b1authenticationspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Authentication</span></h4>\n<ul>\n<li>Authentication은 현재 접근하는 사용자의 정보, 권한등을 담은 정보를 담은 Interface입니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1usernamepasswordauthenticationtokenspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1usernamepasswordauthenticationtokenspan\" aria-label=\"span stylebackground color fff5b1usernamepasswordauthenticationtokenspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>UsernamePasswordAuthenticationToken</span></h4>\n<ul>\n<li>Authentication을 implements한 AbstractAuthenticationToken의 하위 클래스로, User의 ID가 Principal 역할을 하고, Password가 Credential의 역할을 합니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1userdetailsspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1userdetailsspan\" aria-label=\"span stylebackground color fff5b1userdetailsspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>UserDetails</span></h4>\n<ul>\n<li>인증에 성공하여 생성된 UserDetails 객체는 Authentication 객체를 구현한 UsernamePasswordAuthenticationToken을 생성하기 위해 사용됩니다.</li>\n<li>Authentication 객체 안에는 User 정보가 필요하기 때문에 주로 UserDetails를 implements해 필요한 정보를 담은 User 객체를 만들어 사용합니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1userdetailsservicespan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1userdetailsservicespan\" aria-label=\"span stylebackground color fff5b1userdetailsservicespan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>UserDetailsService</span></h4>\n<ul>\n<li>loadUserByUsername() 메소드를 통해 DB에서 User 정보를 가져오고 이를 UserDetails에 알맞은 정보들을 담아 UserDetails 객체를 반환해줍니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1passwordencodingspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1passwordencodingspan\" aria-label=\"span stylebackground color fff5b1passwordencodingspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>PasswordEncoding</span></h4>\n<ul>\n<li>Password를 암호화할 Encoding을 구현체를 통해 지정할 수 있습니다.</li>\n</ul>\n<h4 id=\"span-stylebackground-color-fff5b1grantedauthorityspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1grantedauthorityspan\" aria-label=\"span stylebackground color fff5b1grantedauthorityspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>GrantedAuthority</span></h4>\n<ul>\n<li>현재 사용자가 가진 권한을 의미합니다.</li>\n</ul>\n<p><br><br></p>\n<p>즉, SecurityContextHolder.getContext() 를 통해 SecurityContext를 가져오고 SecurityContext에서 getter, setter 를 이용해 Authentication을 접근할 수 있습니다.</p>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffjwt-로그인span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffjwt-%EB%A1%9C%EA%B7%B8%EC%9D%B8span\" aria-label=\"span stylebackground color f1f8ffjwt 로그인span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>JWT 로그인</span></h3>\n<p>JWT 방식의 로그인에 대해서는 아래 포스팅을 통해 확인할 수 있습니다.</p>\n<p><a href=\"https://junhyxxn.github.io/jwt-structure/\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAlUlEQVQY05VOyw6EIAz0/3/Pg1EiLsgSxEeEo4BjWsN9d5JJX9NpmxgjjDHY9x3rusI5B+89U2uNUgp+BWmbbduglIKUEkII9H2PruvQti1HMp2mCfM8cz4MA8Zx5Ccofo2GVgrHcbyG53nysAqWZeFFIpnQoVrT4WpurX17H8l1CIG/bFJKqKy47xv/IKWM67qQc8YDlLwvRppCth8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"JWT 로그인\"\n        title=\"JWT 로그인\"\n        src=\"/static/2daf8be3230cb8d5aa9ea533a4bfaec7/37523/jwt-login.png\"\n        srcset=\"/static/2daf8be3230cb8d5aa9ea533a4bfaec7/e9ff0/jwt-login.png 180w,\n/static/2daf8be3230cb8d5aa9ea533a4bfaec7/f21e7/jwt-login.png 360w,\n/static/2daf8be3230cb8d5aa9ea533a4bfaec7/37523/jwt-login.png 720w,\n/static/2daf8be3230cb8d5aa9ea533a4bfaec7/c6d67/jwt-login.png 734w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></a></p>\n<p><br><br></p>\n<p><strong>이제 본격적으로 Spring Security를 적용한 Jwt 기반의 로그인을 구현해보겠습니다.</strong></p>\n<p><br><br></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4-spring-security-frameworkspan\"><span style=\"background-color: #ddffe4\">🔒 Spring Security Framework</span></a></p>\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffauthentication--authorizationspan\"><span style=\"background-color: #f1f8ff\">Authentication &#x26; Authorization</span></a></p>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8fffilter-%EA%B8%B0%EB%B0%98%EC%9D%98-spring-securityspan\"><span style=\"background-color: #f1f8ff\">Filter 기반의 Spring Security</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1spring-framework%EC%9D%98-%EC%A0%84%EB%B0%98%EC%A0%81%EC%9D%B8-%ED%9D%90%EB%A6%84span\"><span style='background-color: #fff5b1'>Spring Framework의 전반적인 흐름</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1filter-%EA%B8%B0%EB%B0%98%EC%9D%98-spring-security-architecturespan\"><span style='background-color: #fff5b1'>Filter 기반의 Spring Security Architecture</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ff%EA%B7%B8-%EC%99%B8-%EC%A3%BC%EC%9A%94-%EA%B0%9C%EB%85%90span\"><span style='background-color: #f1f8ff'>그 외 주요 개념</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1securitycontextholderspan\"><span style='background-color: #fff5b1'>SecurityContextHolder</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1securitycontextspan\"><span style='background-color: #fff5b1'>SecurityContext</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1authenticationspan\"><span style='background-color: #fff5b1'>Authentication</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1usernamepasswordauthenticationtokenspan\"><span style='background-color: #fff5b1'>UsernamePasswordAuthenticationToken</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1userdetailsspan\"><span style='background-color: #fff5b1'>UserDetails</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1userdetailsservicespan\"><span style='background-color: #fff5b1'>UserDetailsService</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1passwordencodingspan\"><span style='background-color: #fff5b1'>PasswordEncoding</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1grantedauthorityspan\"><span style='background-color: #fff5b1'>GrantedAuthority</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffjwt-%EB%A1%9C%EA%B7%B8%EC%9D%B8span\"><span style='background-color: #f1f8ff'>JWT 로그인</span></a></p>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 01, 2022","title":"SecurityJwtLogin - 0 [개요 - Spring Security Framework]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"🔐"},"fields":{"slug":"/securityjwtlogin-0/"}},"prev":{"id":"100ea7c9-c919-5bd2-8ab5-c38344389337","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---2span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---2span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   2span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 2</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0ffdb-설계span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffdb-%EC%84%A4%EA%B3%84span\" aria-label=\"span stylebackground color f5f0ffdb 설계span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[DB 설계]</span></h1>\n<hr>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4mysql-db-설계span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4mysql-db-%EC%84%A4%EA%B3%84span\" aria-label=\"span stylebackground color ddffe4mysql db 설계span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>MySQL DB 설계</span></h2>\n<br>\n<h3 id=\"span-stylebackground-color-f1f8fferdspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8fferdspan\" aria-label=\"span stylebackground color f1f8fferdspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>ERD</span></h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 606px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACbklEQVQ4y3WTaW/aQBCG+f//oVK/9UvSVj2itDlKSLgK5Qg0gMNhbAQOd+zYxsf6qXYJlEbpSqPxasbvzLzvbCqOY6IoIooFIoFI3uOYMIqQsdfsf0fGUlEUk4iYq7rOm5MCxwWN42KPD4UOK8eDJFEFZLIQgk0QUdIsrhoDflQ6ZG575LQJbXNKkghS26oR1myC1u3TN0Z0ejrdwRDX9QjDkCAIlEVRyKPtkCm3OMnV+Jop8fGyQPbOpG+tECLeAQpmywXmUGc46Cu/WsyxbRvP85T5vo+/2bBczLGMAabeZ2wOMfUe3fYdM2tCkiRy5C1Xd517CuUaN8Uy+VKVn5U6tuOokXfcyR8836dQb5Ep3/Ltuki6WOMsW6be0lRuapc8WzuMFza9kYXxsGA0XbEJQjXGS1GkgAmo8aV4UkwhtoVTO5UTIYCEYOMrkeT3fgMOFN/dpbmuqzg+zElJBUW8BZAnDDZ7QKXwC0Ap4D5344OQdwGJ2AJKXp5cD32yxJituTfGGNMVw+ma+epRdR4frI23Cck0TD5lb/mSb3LdeSDdmvDbmG05lNXG8zXvzqu8PclylGvzvqBxVOxS1gwFeNilFKXcaHKazpMuVsnV25znqzS0wRZQdri2HQa6znA4ZDQaoWkalmUxX63/eTGyQ7mb1WaLYq1JtlQlW6pweVOg2eooGhTgynYwTFPt38g0MXSd7n0H3TCJnzs8FMXxgr09+SGOH+AH4ZZDiWrN5pzlylzkfnGazvL9usjnixsqzbYSIHrxrqVokgoR//XiOZaSY8hXMF87LB2XxeOzt10c19snvma7QocF/wCi0yNfqVrZwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"user-erd\"\n        title=\"user-erd\"\n        src=\"/static/8acd68eb86e59911ae66eece330a03d1/4d4a2/user-erd.png\"\n        srcset=\"/static/8acd68eb86e59911ae66eece330a03d1/e9ff0/user-erd.png 180w,\n/static/8acd68eb86e59911ae66eece330a03d1/f21e7/user-erd.png 360w,\n/static/8acd68eb86e59911ae66eece330a03d1/4d4a2/user-erd.png 606w\"\n        sizes=\"(max-width: 606px) 100vw, 606px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<ul>\n<li>단순한 프로젝트의 경우 User Table에 Authority 를 포함시키는 편이 더 간단합니다.</li>\n<li>하지만, 복잡한 프로젝트의 경우 한 user가 여러 autority를 가질 수 있습니다.</li>\n<li>예를 든다면, 강사가 존재하고 그 직속으로 조교라는 개념이 존재한다면</li>\n<li>강사는 조교의 권한과 강사의 권한을 모두 갖게 됩니다.</li>\n</ul>\n<br>\n<p>⭐ 따라서, 위와 같이 한 유저가 여러 권한을 가질 수 있도록 ERD를 구성했습니다.<br>\n<br></p>\n<p>일반적으로 사용자별 권한 관리 방식과 그룹별 권한 관리 방식이 존재한다고 합니다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4mysql-db-%EC%84%A4%EA%B3%84span\"><span style='background-color: #ddffe4'>MySQL DB 설계</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-f1f8fferdspan\"><span style='background-color: #f1f8ff'>ERD</span></a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 02, 2022","title":"SecurityJwtLogin - 2 [DB 설계]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"🔐"},"fields":{"slug":"/securityjwtlogin-2/"}},"site":{"siteMetadata":{"siteUrl":"https://www.JunHyxxn.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/securityjwtlogin-1/","nextSlug":"/securityjwtlogin-0/","prevSlug":"/securityjwtlogin-2/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}