{"componentChunkName":"component---src-templates-blog-template-js","path":"/securityjwtlogin-4/","result":{"data":{"cur":{"id":"5f54c138-b734-53cd-96f8-e6887a1954ae","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---4span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---4span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   4span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 4</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0fftoken-providerspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0fftoken-providerspan\" aria-label=\"span stylebackground color f5f0fftoken providerspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[Token Provider]</span></h1>\n<hr>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4token-providerspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4token-providerspan\" aria-label=\"span stylebackground color ddffe4token providerspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>Token Provider</span></h2>\n<br>\n<p>í† í°ì„ ìƒì„±, í† í°ìœ¼ë¡œë¶€í„° Authentication ìƒì„±, ìœ íš¨ì„± ê²€ì‚¬ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  Token Providerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>\n<br>\n<p>ì´ ë•Œ, ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— í•„ìš”í•œ ì‘ì—…ì´ ìˆìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>ì¼ë°˜ì ìœ¼ë¡œ ìƒì„±ìê°€ í˜¸ì¶œë  ë•Œ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>\n<li>ì´ ê²½ìš°ì— ì–´ë–¤ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffinitializingbean-vs-postconstructspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffinitializingbean-vs-postconstructspan\" aria-label=\"span stylebackground color f1f8ffinitializingbean vs postconstructspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>InitializingBean VS @PostConstruct</span></h3>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1ì¼ë°˜ì ì¸-ìƒì„±ì-í˜¸ì¶œ-ì‹œì ì—-ìˆ˜í–‰span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1%EC%9D%BC%EB%B0%98%EC%A0%81%EC%9D%B8-%EC%83%9D%EC%84%B1%EC%9E%90-%ED%98%B8%EC%B6%9C-%EC%8B%9C%EC%A0%90%EC%97%90-%EC%88%98%ED%96%89span\" aria-label=\"span stylebackground color fff5b1ì¼ë°˜ì ì¸ ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ìˆ˜í–‰span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>ì¼ë°˜ì ì¸ ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ìˆ˜í–‰</span></h4>\n<br>\n<p><span style='color: #FF0000'>ğŸŒˆ SingleTon ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤ê³  ê°€ì •</span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Animal</span> animal<span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Foo NoArgsConstruct!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Null</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Animal</span> animal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animal <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Foo AllArgsConstruct!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>new Foo() ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´ Animal ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— NULL ì´ ëœë‹¤.</li>\n<li>ë˜í•œ, Proxy ë“±ì˜ ì´ìœ ë¡œ Spring Frameworkì—ì„œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” ìƒì„±ìì´ê¸° ë•Œë¬¸ì— animalì„ ì—¬ëŸ¬ ë²ˆ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤.</li>\n<li>ì´ë¥¼ ìƒì„±ì ì£¼ì…ê³¼ @PostConstructë¡œ ìˆ˜ì •í•œ ì½”ë“œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1postconstructspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1postconstructspan\" aria-label=\"span stylebackground color fff5b1postconstructspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>@PostConstruct</span></h4>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Foo2</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Animal</span> animal<span class=\"token punctuation\">;</span>\n\t<span class=\"token annotation punctuation\">@Autowired</span>\n\t<span class=\"token class-name\">Foo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Animal</span> animal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animal <span class=\"token operator\">=</span> animal<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token annotation punctuation\">@PostConstruct</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token class-name\">Call</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Foo AllArgsConstruct!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>animal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>ìƒì„±ì ì£¼ì…ì„ í†µí•´ animalì„ ì£¼ì…ë°›ê³  ì´ë¥¼ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>\n<li>ë˜í•œ, @PostConstruct ë¥¼ í†µí•´ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” ìƒì„±ìì— ë¹„í•´ í•œ ë²ˆë§Œ í˜¸ì¶œë˜ë„ë¡ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<p>ğŸ”¥ í•˜ì§€ë§Œ, Java 9 ë¶€í„°ëŠ” @PostConstructëŠ” Deprecated(ì‚¬ë¼ì§ˆ ì˜ˆì •, ê¶Œì¥ X) í•œë‹¤ê³  í•©ë‹ˆë‹¤.<br>\në”°ë¼ì„œ, Spring ì—ì„œ ê¶Œì¥í•˜ëŠ” InitializingBeanì˜ afterPropertiesSet() ë©”ì†Œë“œë¥¼ í†µí•´ í•œ ë²ˆë§Œ í˜¸ì¶œë˜ë„ë¡ í•©ë‹ˆë‹¤.</p>\n<p><br><br></p>\n<h4 id=\"span-stylebackground-color-fff5b1initializingbeanspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1initializingbeanspan\" aria-label=\"span stylebackground color fff5b1initializingbeanspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>InitializingBean</span></h4>\n<br>\n<p>InitializingBean ì¸í„°í˜ì´ìŠ¤ì˜ afterPropertiesSet ë©”ì†Œë“œëŠ”<br>\nBeanFactoryì— ì˜í•´ ëª¨ë“  Propertyê°€ ì„¤ì • ëœ í›„ ì‹¤í–‰ëœë‹¤.</p>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffjwt-ì„¤ì •span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffjwt-%EC%84%A4%EC%A0%95span\" aria-label=\"span stylebackground color f1f8ffjwt ì„¤ì •span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>JWT ì„¤ì •</span></h3>\n<br>\n<p>ğŸ”‘ jwt ì™€ ê´€ë ¨ëœ ì„¤ì •ì„ ì¶”ê°€í•´ì¤ë‹ˆë‹¤.<br>\napplication.yml íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. <br></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\">## JWT setting</span>\n<span class=\"token key atrule\">jwt</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">header</span><span class=\"token punctuation\">:</span> Authorization\n  <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span> TXlTZWNyZXRLZXlJc1ZlcnlJbXBvcnRhbnRJdElzVG9wU2VjcmV0UGxlYXNlVXNlRW5jb2RlZFZhbHVl\n  <span class=\"token comment\">## Access Token - Test : 60 ( 1 min ) Normal : 1800 ( 30 min )</span>\n  <span class=\"token key atrule\">accesstoekn-validity-in-seconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1800</span>\n  <span class=\"token comment\">## Refresh Token - Test : 180 ( 3 min ) Normal : 604800 ( 7 days )</span>\n  <span class=\"token key atrule\">refreshtoekn-validity-in-seconds</span><span class=\"token punctuation\">:</span> <span class=\"token number\">604800</span></code></pre></div>\n<ul>\n<li>secret keyì˜ ê²½ìš° ë…¸ì¶œë˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì €ì¥í•  ë•Œë„ BASE64 Encoding í•œ ê°’ìœ¼ë¡œ ì €ì¥í•´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</li>\n<li>access-tokenê³¼ refresh-tokenì˜ ë§Œë£Œì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8fftoken-provider-ìƒì„±ì-ë°-afterpropertiesset-ë©”ì†Œë“œspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8fftoken-provider-%EC%83%9D%EC%84%B1%EC%9E%90-%EB%B0%8F-afterpropertiesset-%EB%A9%94%EC%86%8C%EB%93%9Cspan\" aria-label=\"span stylebackground color f1f8fftoken provider ìƒì„±ì ë° afterpropertiesset ë©”ì†Œë“œspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>Token Provider ìƒì„±ì ë° afterPropertiesSet ë©”ì†Œë“œ</span></h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TokenProvider</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InitializingBean</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TokenProvider</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> AUTHORITIES_KEY <span class=\"token operator\">=</span> <span class=\"token string\">\"auth\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> secret<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> accesstokenValidityInMilliSeconds<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> refreshtokenValidityInMilliSeconds<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Key</span> key<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TokenProvider</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.secret}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> secret<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.accesstoken-validity-in-seconds}\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> accesstokenValidityInMilliSeconds<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.refreshtoken-validity-in-seconds}\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> refreshtokenValidityInMilliSeconds\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>secret <span class=\"token operator\">=</span> secret<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accesstokenValidityInMilliSeconds <span class=\"token operator\">=</span> accesstokenValidityInMilliSeconds <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshtokenValidityInMilliSeconds <span class=\"token operator\">=</span> refreshtokenValidityInMilliSeconds <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterPropertiesSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> ketBytes <span class=\"token operator\">=</span> <span class=\"token class-name\">Decoders</span><span class=\"token punctuation\">.</span>BASE64<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>secret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Creates a new SecretKey instance for use with HMAC-SHA algorithms based on the specified key byte array.</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> <span class=\"token class-name\">Keys</span><span class=\"token punctuation\">.</span><span class=\"token function\">hmacShaKeyFor</span><span class=\"token punctuation\">(</span>ketBytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>application.yml ì—ì„œ ì„¤ì •í•œ ê°’ì— ì˜í•´ access-tokenê³¼ refresh-tokenì˜ ë§Œë£Œì‹œê°„ì€ ê°ê° 30min, 7days ì…ë‹ˆë‹¤.</li>\n<li>BeanFactoryì— ì˜í•´ ëª¨ë“  Propertiesê°€ ì„¤ì •ëœ í›„ Secret Keyë¥¼ ìƒì„±í•´ì¤ë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffí† í°-ìƒì„±-ì¡°íšŒ-ìœ íš¨ì„±-ê²€ì‚¬span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ff%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1-%EC%A1%B0%ED%9A%8C-%EC%9C%A0%ED%9A%A8%EC%84%B1-%EA%B2%80%EC%82%ACspan\" aria-label=\"span stylebackground color f1f8ffí† í° ìƒì„± ì¡°íšŒ ìœ íš¨ì„± ê²€ì‚¬span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>í† í° ìƒì„±, ì¡°íšŒ, ìœ íš¨ì„± ê²€ì‚¬</span></h3>\n<br>\n<p>ğŸ“Œ TokenProviderì˜ ì£¼ìš” ê¸°ëŠ¥ì¸ í† í° ìƒì„±, ì¡°íšŒ, ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ì™„ì„±í•©ë‹ˆë‹¤.\n<br></p>\n<h4 id=\"span-stylebackground-color-fff5b1create-tokenspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1create-tokenspan\" aria-label=\"span stylebackground color fff5b1create tokenspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Create token</span></h4>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Access Token Generator</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">createAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Authority</span>\n\t<span class=\"token class-name\">String</span> authorities <span class=\"token operator\">=</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token comment\">// í˜„ì¬ authenticationì´ ê°€ì§„ ê¶Œí•œ</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token function\">getAuthority</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Create Access token] authorities : \"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set Expiration Time</span>\n\t<span class=\"token keyword\">long</span> now <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Date</span> validity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accesstokenValidityInMilliSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">setSubject</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// username</span>\n\t\t\t<span class=\"token comment\">// Claim ì— Key=\"auth\", data= username ì„ ë„£ê¸°ë„ í•œë‹¤.</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span> <span class=\"token comment\">// auth: roles</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">signWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SignatureAlgorithm</span><span class=\"token punctuation\">.</span>HS512<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey, algorithms</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">setExpiration</span><span class=\"token punctuation\">(</span>validity<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Refresh Token Generator</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">createRefreshToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// Authority</span>\n\t<span class=\"token class-name\">String</span> authorities <span class=\"token operator\">=</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token comment\">// í˜„ì¬ authenticationì´ ê°€ì§„ ê¶Œí•œ</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token function\">getAuthority</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Create Refresh token] authorities : \"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// Set Expiration Time</span>\n\t<span class=\"token keyword\">long</span> now <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">Date</span> validity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshtokenValidityInMilliSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">setSubject</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// username</span>\n\t\t\t<span class=\"token comment\">// Claim ì— Key=\"auth\", data= username ì„ ë„£ê¸°ë„ í•œë‹¤.</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span> <span class=\"token comment\">// auth: roles</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">signWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SignatureAlgorithm</span><span class=\"token punctuation\">.</span>HS512<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey, algorithms</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">setExpiration</span><span class=\"token punctuation\">(</span>validity<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1get-authenticationspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1get-authenticationspan\" aria-label=\"span stylebackground color fff5b1get authenticationspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Get Authentication</span></h4>\n<br>\n<p>ğŸ“Œ Tokenìœ¼ë¡œë¶€í„° Authentication ê°ì²´ ë¦¬í„´í•˜ëŠ” í•¨ìˆ˜</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// tokenìœ¼ë¡œë¶€í„° Authentication ê°ì²´ ë¦¬í„´</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">getAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Claims</span> claims <span class=\"token operator\">=</span> <span class=\"token class-name\">Jwts</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">parserBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">setSigningKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey  ì„¤ì •</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">parseClaimsJws</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// claimsì— auth: rolesë¡œ ë‹´ì•„ë‘” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>\n\t<span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GrantedAuthority</span><span class=\"token punctuation\">></span></span> authorities <span class=\"token operator\">=</span>\n\t\t\t<span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span>claims<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleGrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// UserDetails ì˜ êµ¬í˜„ì²´ì¸ User</span>\n\t<span class=\"token comment\">// ê¸°ë³¸ì ìœ¼ë¡œ Principal, Credential, authorities í•„ìš”í•˜ë‹¤.</span>\n\t<span class=\"token comment\">// tokenì˜ subjectì— usernameì„ ë‹´ì•„ë’€ë‹¤.</span>\n\t<span class=\"token class-name\">User</span> principal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>claims<span class=\"token punctuation\">.</span><span class=\"token function\">getSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">// Authentication ë¦¬í„´</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>principal<span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1validation-checkspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1validation-checkspan\" aria-label=\"span stylebackground color fff5b1validation checkspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>Validation Check</span></h4>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// í† í° ìœ íš¨ì„± ê²€ì‚¬</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// ì„±ê³µì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤ë©´ ìœ íš¨í•œ í† í°ì´ë‹¤.</span>\n\t\t<span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">parserBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSigningKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseClaimsJws</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SecurityException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">MalformedJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜ëª»ëœ JWT ì„œëª…ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ExpiredJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë§Œë£Œëœ í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UnsupportedJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì§€ì›ë˜ì§€ ì•ŠëŠ” JWT í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlogger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜ëª»ëœ JWT í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h2 id=\"span-stylebackground-color-ddffe4ìµœì¢…-ì½”ë“œspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4%EC%B5%9C%EC%A2%85-%EC%BD%94%EB%93%9Cspan\" aria-label=\"span stylebackground color ddffe4ìµœì¢… ì½”ë“œspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>ìµœì¢… ì½”ë“œ</span></h2>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Decoders</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">io<span class=\"token punctuation\">.</span>jsonwebtoken<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Keys</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InitializingBean</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Value</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>authentication<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UsernamePasswordAuthenticationToken</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Authentication</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GrantedAuthority</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>authority<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SimpleGrantedAuthority</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>userdetails<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">User</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Key</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Arrays</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Collection</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Date</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>stream<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Collectors</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TokenProvider</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">InitializingBean</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TokenProvider</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> AUTHORITIES_KEY <span class=\"token operator\">=</span> <span class=\"token string\">\"auth\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> secret<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> accesstokenValidityInMilliSeconds<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">long</span> refreshtokenValidityInMilliSeconds<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Key</span> key<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">TokenProvider</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.secret}\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">String</span> secret<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.accesstoken-validity-in-seconds}\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> accesstokenValidityInMilliSeconds<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@Value</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"${jwt.refreshtoken-validity-in-seconds}\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">long</span> refreshtokenValidityInMilliSeconds\n    <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>secret <span class=\"token operator\">=</span> secret<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accesstokenValidityInMilliSeconds <span class=\"token operator\">=</span> accesstokenValidityInMilliSeconds <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshtokenValidityInMilliSeconds <span class=\"token operator\">=</span> refreshtokenValidityInMilliSeconds <span class=\"token operator\">*</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterPropertiesSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">byte</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> ketBytes <span class=\"token operator\">=</span> <span class=\"token class-name\">Decoders</span><span class=\"token punctuation\">.</span>BASE64<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>secret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Creates a new SecretKey instance for use with HMAC-SHA algorithms based on the specified key byte array.</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> <span class=\"token class-name\">Keys</span><span class=\"token punctuation\">.</span><span class=\"token function\">hmacShaKeyFor</span><span class=\"token punctuation\">(</span>ketBytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Access Token Generator</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">createAccessToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Authority</span>\n        <span class=\"token class-name\">String</span> authorities <span class=\"token operator\">=</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token comment\">// í˜„ì¬ authenticationì´ ê°€ì§„ ê¶Œí•œ</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token function\">getAuthority</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Create Access token] authorities : \"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Set Expiration Time</span>\n        <span class=\"token keyword\">long</span> now <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Date</span> validity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accesstokenValidityInMilliSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setSubject</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// username</span>\n                <span class=\"token comment\">// Claim ì— Key=\"auth\", data= username ì„ ë„£ê¸°ë„ í•œë‹¤.</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span> <span class=\"token comment\">// auth: roles</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">signWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SignatureAlgorithm</span><span class=\"token punctuation\">.</span>HS512<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey, algorithms</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setExpiration</span><span class=\"token punctuation\">(</span>validity<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// Refresh Token Generator</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">createRefreshToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Authentication</span> authentication<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Authority</span>\n        <span class=\"token class-name\">String</span> authorities <span class=\"token operator\">=</span> authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthorities</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token comment\">// í˜„ì¬ authenticationì´ ê°€ì§„ ê¶Œí•œ</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token function\">getAuthority</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">joining</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[Create Refresh token] authorities : \"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Set Expiration Time</span>\n        <span class=\"token keyword\">long</span> now <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Date</span> validity <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span>now <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshtokenValidityInMilliSeconds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setSubject</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// username</span>\n                <span class=\"token comment\">// Claim ì— Key=\"auth\", data= username ì„ ë„£ê¸°ë„ í•œë‹¤.</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">claim</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span> <span class=\"token comment\">// auth: roles</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">signWith</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SignatureAlgorithm</span><span class=\"token punctuation\">.</span>HS512<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey, algorithms</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setExpiration</span><span class=\"token punctuation\">(</span>validity<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">compact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// tokenìœ¼ë¡œë¶€í„° Authentication ê°ì²´ ë¦¬í„´</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Authentication</span> <span class=\"token function\">getAuthentication</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Claims</span> claims <span class=\"token operator\">=</span> <span class=\"token class-name\">Jwts</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">parserBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">setSigningKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span> <span class=\"token comment\">// secretKey  ì„¤ì •</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">parseClaimsJws</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">getBody</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// claimsì— auth: rolesë¡œ ë‹´ì•„ë‘” ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.</span>\n        <span class=\"token class-name\">Collection</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GrantedAuthority</span><span class=\"token punctuation\">></span></span> authorities <span class=\"token operator\">=</span>\n                <span class=\"token class-name\">Arrays</span><span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span>claims<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>AUTHORITIES_KEY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SimpleGrantedAuthority</span><span class=\"token operator\">::</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collectors</span><span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// UserDetails ì˜ êµ¬í˜„ì²´ì¸ User</span>\n        <span class=\"token comment\">// ê¸°ë³¸ì ìœ¼ë¡œ Principal, Credential, authorities í•„ìš”í•˜ë‹¤.</span>\n        <span class=\"token comment\">// tokenì˜ subjectì— usernameì„ ë‹´ì•„ë’€ë‹¤.</span>\n        <span class=\"token class-name\">User</span> principal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>claims<span class=\"token punctuation\">.</span><span class=\"token function\">getSubject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Authentication ë¦¬í„´</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UsernamePasswordAuthenticationToken</span><span class=\"token punctuation\">(</span>principal<span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">,</span> authorities<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// í† í° ìœ íš¨ì„± ê²€ì‚¬</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> token<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// ì„±ê³µì ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤ë©´ ìœ íš¨í•œ í† í°ì´ë‹¤.</span>\n            <span class=\"token class-name\">Jwts</span><span class=\"token punctuation\">.</span><span class=\"token function\">parserBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setSigningKey</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseClaimsJws</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SecurityException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">MalformedJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜ëª»ëœ JWT ì„œëª…ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ExpiredJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ë§Œë£Œëœ í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UnsupportedJwtException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì§€ì›ë˜ì§€ ì•ŠëŠ” JWT í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IllegalArgumentException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì˜ëª»ëœ JWT í† í°ì…ë‹ˆë‹¤.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><br><br></p>\n<p>ğŸ”¥ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Filterì™€ 401, 403 ExceptionHandlerë¥¼ ìƒì„±í•˜ê³  ë“±ë¡í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ğŸŒˆ ëª¨ë“  ì½”ë“œëŠ” <a href=\"https://github.com/JunHyxxn/SecurityJwtLogin\">junhyxxn GitHub</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!!</p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4token-providerspan\"><span style='background-color: #ddffe4'>Token Provider</span></a></p>\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffinitializingbean-vs-postconstructspan\"><span style='background-color: #f1f8ff'>InitializingBean VS @PostConstruct</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1%EC%9D%BC%EB%B0%98%EC%A0%81%EC%9D%B8-%EC%83%9D%EC%84%B1%EC%9E%90-%ED%98%B8%EC%B6%9C-%EC%8B%9C%EC%A0%90%EC%97%90-%EC%88%98%ED%96%89span\"><span style='background-color: #fff5b1'>ì¼ë°˜ì ì¸ ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ìˆ˜í–‰</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1postconstructspan\"><span style='background-color: #fff5b1'>@PostConstruct</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1initializingbeanspan\"><span style='background-color: #fff5b1'>InitializingBean</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffjwt-%EC%84%A4%EC%A0%95span\"><span style='background-color: #f1f8ff'>JWT ì„¤ì •</span></a></p>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8fftoken-provider-%EC%83%9D%EC%84%B1%EC%9E%90-%EB%B0%8F-afterpropertiesset-%EB%A9%94%EC%86%8C%EB%93%9Cspan\"><span style='background-color: #f1f8ff'>Token Provider ìƒì„±ì ë° afterPropertiesSet ë©”ì†Œë“œ</span></a></p>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ff%ED%86%A0%ED%81%B0-%EC%83%9D%EC%84%B1-%EC%A1%B0%ED%9A%8C-%EC%9C%A0%ED%9A%A8%EC%84%B1-%EA%B2%80%EC%82%ACspan\"><span style='background-color: #f1f8ff'>í† í° ìƒì„±, ì¡°íšŒ, ìœ íš¨ì„± ê²€ì‚¬</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1create-tokenspan\"><span style='background-color: #fff5b1'>Create token</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1get-authenticationspan\"><span style='background-color: #fff5b1'>Get Authentication</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1validation-checkspan\"><span style='background-color: #fff5b1'>Validation Check</span></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4%EC%B5%9C%EC%A2%85-%EC%BD%94%EB%93%9Cspan\"><span style='background-color: #ddffe4'>ìµœì¢… ì½”ë“œ</span></a></p>\n</li>\n</ul>\n</div>","excerpt":"SecurityJwtLogin - 4 [Token Provider]  Token Provider í† í°ì„ ìƒì„±, í† í°ìœ¼ë¡œë¶€í„° Authentication ìƒì„±, ìœ íš¨ì„± ê²€ì‚¬ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  Token Providerë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì´ ë•Œ, ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— í•„ìš”í•œ ì‘ì—…ì´ ìˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìƒì„±ìê°€ í˜¸ì¶œë  ë•Œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ ê²½ìš°ì— ì–´ë–¤ ë¬¸ì œê°€ ë°œìƒí•˜ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.  InitializingBean VS @PostConstruct ì¼ë°˜ì ì¸ ìƒì„±ì í˜¸ì¶œ ì‹œì ì— ìˆ˜í–‰ ğŸŒˆ SingleTon ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤ê³  ê°€ì • new Foo() ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´ Animal ì´ ë“±ë¡ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— NULL ì´ ëœë‹¤. ë˜í•œ, Proxy ë“±ì˜ ì´ìœ ë¡œ Spring Frameworkì—ì„œ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” ìƒì„±ìì´ê¸° ë•Œë¬¸ì— animalì„ ì—¬ëŸ¬ ë²ˆ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ìƒì„±ì ì£¼ì…ê³¼ @PostConstructë¡œ ìˆ˜ì •í•œ ì½”ë“œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. @PostConstruct ìƒì„±ì ì£¼ì…ì„ í†µí•´â€¦","frontmatter":{"date":"December 03, 2022","title":"SecurityJwtLogin - 4 [Token Provider]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"ğŸ”"},"fields":{"slug":"/securityjwtlogin-4/"}},"next":{"id":"d12e8094-4148-53ee-b596-ceefdaf736c9","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---3span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---3span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   3span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 3</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0ffê¸°ë³¸-model-ìƒì„±span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ff%EA%B8%B0%EB%B3%B8-model-%EC%83%9D%EC%84%B1span\" aria-label=\"span stylebackground color f5f0ffê¸°ë³¸ model ìƒì„±span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[ê¸°ë³¸ Model ìƒì„±]</span></h1>\n<hr>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4vo--dtospan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4vo--dtospan\" aria-label=\"span stylebackground color ddffe4vo  dtospan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>VO &#x26; DTO</span></h2>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 242px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 114.44444444444446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACtElEQVQ4y41U2W7TQBT1CxJ8AbzBA1CpQBEpSuNtVi9xvMVx7SZN2rSpqlYIUYl3vv2gmdTUKdkeju/Ivvf43DN3xrAJh+cHIGkJ++cfRPkI+bAA4QKWS+FQDocw2IQt1ztgqESXCbjCB8kqZGWNOBuCCg+ES520L5kmVA+lhAoJISTGlwvUFwv0oxh5UcB06ErBLnKjSVDRIgzCDxHGKcbzGwRRgqAfwaFtEtX+DoXtv6o2vXCAyfUt8lGN/iBGz3ZhOuTJU7rZ03+ETYIqUp4SJnB2uUA1vdLtV+NzxEmmvzcK15Eaz180SS6XSEcV4rxE0B8gznIkaQ4mva1eGuvIVFRt1rMrVNM5+oMEZVWjKCucTaZa/V6EDZkaGS59lJMLDOuJVpgOR4jidMW/vVtWHlIuUdTnGI1nyxEaVYjiBDaha5U15Btb1kq50KNz/eMBaZYjyzI9Wtbjd7u1buo2boqKaoSo9DWpV04QFBUYoRBcgDEOSrmOpK3Qbv1tFU/DbpoWzOk9nGqOMaeY9UNMAh+nnqfjQEiYipBwGK4akW1QClwX7ngBfjpDQgmGvofS91B4EpSt5hvHFsNW2BzHPRed8hon+RS+TTBgHjgR8KnAN4uh08o3Xh242ISXH5d48a6L18kd3vhzHH52cNSROPjK0TkWePuF6ZymxvjwnWITDroch6aPIxLhk1fgkKXo9SgsS8A0Bbomx9EJw/tWjaE8eA72GIMwRJLluH/4jSJLEfkSJ4SiR5mGSZn2mLVqt+6y6VJYhMOyXVjjG5ByuSmF5yOTEqmU/9UZm+61lWPluLDPFuDlDCNOkUpPk5Wep3e2nWtsu33tNuH0DqSeY8goxkGAkAt03dWTtZOwrdA5vYQ7PENIiVYo2J6Xw1qVtgPr6hfE9FaflML39QlaZ89fjCsm41J410UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ê¸°ë³¸ VO &amp; DTO\"\n        title=\"ê¸°ë³¸ VO &amp; DTO\"\n        src=\"/static/0cfff8e0088b2349c03f599ba54e657d/a1a85/principle-model.png\"\n        srcset=\"/static/0cfff8e0088b2349c03f599ba54e657d/e9ff0/principle-model.png 180w,\n/static/0cfff8e0088b2349c03f599ba54e657d/a1a85/principle-model.png 242w\"\n        sizes=\"(max-width: 242px) 100vw, 242px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>User : ì‚¬ìš©ì Entity</li>\n<li>Token : Token Entity</li>\n<li>Authority : ê¶Œí•œ ì •ë³´</li>\n<li>JwtResponseDto : ì‘ë‹µ DTO</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffuserspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffuserspan\" aria-label=\"span stylebackground color f1f8ffuserspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>User</span></h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Builder</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ì•„ì´ë””</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// íŒ¨ìŠ¤ì›Œë“œ</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ìœ íš¨í•œ ìœ ì €</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">boolean</span> activated<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ê¶Œí•œ ë¦¬ìŠ¤íŠ¸</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Authority</span><span class=\"token punctuation\">></span></span> roles<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<ul>\n<li>ê¶Œí•œì˜ ê²½ìš° ì—¬ëŸ¬ ê¶Œí•œì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ìœ„ì™€ ê°™ì´ Collectionìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffjwtresponsespan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffjwtresponsespan\" aria-label=\"span stylebackground color f1f8ffjwtresponsespan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>JwtResponse</span></h3>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Data</span>\n<span class=\"token annotation punctuation\">@AllArgsConstructor</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtResponse</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> accessToken<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"Bearer\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> refreshToken<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> roles<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// AccessToken + RefreshToken ë°œê¸‰ [ ìµœì´ˆ ë°œê¸‰ ì‹œ ]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> accessToken<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> refreshToken<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">,</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> roles<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accessToken <span class=\"token operator\">=</span> accessToken<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshToken <span class=\"token operator\">=</span> refreshToken<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> username<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>roles <span class=\"token operator\">=</span> roles<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// AccessToken ì¬ë°œê¸‰ ì‹œ</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JwtResponse</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> accessToken<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> refreshToken<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>accessToken <span class=\"token operator\">=</span> accessToken<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refreshToken <span class=\"token operator\">=</span> refreshToken<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ìµœì´ˆ ë°œê¸‰ ì‹œ access token, refresh token ëª¨ë‘ ë°œê¸‰í•´ì£¼ê³ , ìœ ì € ì•„ì´ë””ì™€ ê¶Œí•œ ì •ë³´ë¥¼ í•¨ê»˜ ë³´ë‚´ì¤¬ìŠµë‹ˆë‹¤.</li>\n<li>í† í° ì™¸ì˜ ì •ë³´ëŠ” ì–´ë–¤ ì •ë³´ë¥¼ ë³´ë‚´ì¤„ ê²ƒì¸ê°€ì— ë”°ë¼ì„œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.</li>\n<li>access token ì¬ë°œê¸‰ ì‹œ í† í°ë§Œ ì¬ë°œê¸‰í•´ì¤¬ìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<p>ğŸŒˆ ëª¨ë“  ì½”ë“œëŠ” <a href=\"https://github.com/JunHyxxn/SecurityJwtLogin\">junhyxxn GitHub</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!!</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4vo--dtospan\"><span style='background-color: #ddffe4'>VO &#x26; DTO</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-f1f8ffuserspan\"><span style='background-color: #f1f8ff'>User</span></a></li>\n<li><a href=\"#span-stylebackground-color-f1f8ffjwtresponsespan\"><span style='background-color: #f1f8ff'>JwtResponse</span></a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 02, 2022","title":"SecurityJwtLogin - 3 [ê¸°ë³¸ Model ìƒì„±]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"ğŸ”"},"fields":{"slug":"/securityjwtlogin-3/"}},"prev":{"id":"2343b1be-c8e6-5f1a-a42c-02b1b6709743","html":"<h1 id=\"span-stylebackground-color-f5f0ffsecurityjwtlogin---5span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffsecurityjwtlogin---5span\" aria-label=\"span stylebackground color f5f0ffsecurityjwtlogin   5span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">SecurityJwtLogin - 5</span></h1>\n<h1 id=\"span-stylebackground-color-f5f0ffjwt-filter--exceptionhandlerspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f5f0ffjwt-filter--exceptionhandlerspan\" aria-label=\"span stylebackground color f5f0ffjwt filter  exceptionhandlerspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style=\"background-color: #f5f0ff\">[JWT Filter &#x26; ExceptionHandler]</span></h1>\n<hr>\n<p><br><br></p>\n<h2 id=\"span-stylebackground-color-ddffe4spring-security-filterspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4spring-security-filterspan\" aria-label=\"span stylebackground color ddffe4spring security filterspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>Spring Security Filter</span></h2>\n<br>\n<ul>\n<li>Spring-Security ëŠ” <span style='color: #FF0000'>Filter</span> ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤.</li>\n<li>í° ê·¸ë¦¼ì„ ë³´ë©´ ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAADAUlEQVQozy1SW2hcVRQ9DioICgoWxQr6oz9SaasVBKH0o1j0QwQVtKB+9EeFfowPIqJCivQhbWltk2K1E4p1YoxhTJt2kk4nNmliMsM0M21ssG2apJO5r/O8555zz73z2pLBBYv1tdbasBfijL0gdPhceX7+lXw+v8Nz3c2M0g2UkGduLiwgqVQCAO5pASAAQMaED0tfbImM2RTH9c0AsMZNUA+3GJ88gbDrJp1b/+7+p1jYVymX99dqtSTBeBfB+G3HcVAUx52gr7o+u39NlcQ7fY4h1D6PIy2VJNJnLgtIFWJFvkdB1ECakt0cY8uxrWvGhDN/Xx5/es1MPPfDpTuLQ65jH7aXb69zRYB0IN4yoQojo616HDmhVq4K/JrmOIoC9h3CpVEkAbZhIVM24cdU1Di4CvAQrJYQrcNGi4hdWJo3dwIkOhcCvE6FAh23nKjRZkLFjPqhw0UAdYA9iOZTb1ROd79/p6/r5ZX+7lcXU5+/eC194IPrA4feWf593/Ybp7q2zZ/6cmslfeC95eEfXlvI9CRF+eLHdycGv/UK5z6tTWWSy+O/fbMydfaj2xdSXyBayZ9cnBwuyRtXeu1S7k+vPH5ktTCaqxbH+r3KX79apdyQVcqdWZoeyfL5yeOLk8NTrHJp78r0uSG7mO2tzZ7/cWnq7IhbzH5tFy6MobgFvSpqTDcAjjKpB3Xc3K/j5vkwbg6HcWNMR428MvUs84Ny1GynZRiPRS04FITxxagJvzCp+xzM8g7hPS7h15FW6mfB+Vyo9cGA2OtajXgDwd4lRkm/CXWPVsHJwPePckr/MDrYIZzqY+1m/SVOaVYKccJZvfv87JWJjYKzpOc4l5HP8IBVXVlSgh43xiDf95+SUqallD1G8sfh//0BQEIKhoTwn7Us65ht210Y427seXtnZ2YemLt6FXUQcNpn16pl5fPDa8bIRJ9gz2szStsA7e2dz86N3Fc98m4CJvYkiqODD575qXd9LtP/SC6TfnQgdeLJ0wOZe0cmCp3i/wAuwGjIBhV0UwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Filter Chain Flow\"\n        title=\"Filter Chain Flow\"\n        src=\"/static/58944dbf7bf68907c65037a30f92eb58/37523/filter-flow.png\"\n        srcset=\"/static/58944dbf7bf68907c65037a30f92eb58/e9ff0/filter-flow.png 180w,\n/static/58944dbf7bf68907c65037a30f92eb58/f21e7/filter-flow.png 360w,\n/static/58944dbf7bf68907c65037a30f92eb58/37523/filter-flow.png 720w,\n/static/58944dbf7bf68907c65037a30f92eb58/302a4/filter-flow.png 1080w,\n/static/58944dbf7bf68907c65037a30f92eb58/21b4d/filter-flow.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<blockquote>\n<p>ì¶œì²˜ : <a href=\"https://gngsn.tistory.com/160\">gngsnë‹˜ ë¸”ë¡œê·¸</a></p>\n</blockquote>\n<ul>\n<li>í° íë¦„ì€ ìœ„ì™€ ê°™ê³ , ì´ë¥¼ ëª¨ë‘ ì´í•´í•˜ê¸°ì—” ì–´ë ¤ì›€ì´ ìˆì–´ ìš°ì„  ë‹¹ì¥ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ë“¤ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ì´ìš©í•˜ê² ìŠµë‹ˆë‹¤.</li>\n</ul>\n<br>\n<h3 id=\"span-stylebackground-color-f1f8ffusernamepasswordauthenticationfilterspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffusernamepasswordauthenticationfilterspan\" aria-label=\"span stylebackground color f1f8ffusernamepasswordauthenticationfilterspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>UsernamePasswordAuthenticationFilter</span></h3>\n<br>\n<p>ğŸ”¥ ê¸°ë³¸ì ìœ¼ë¡œ Authentication(ì¸ì¦)ì„ ë‹´ë‹¹í•˜ëŠ” í•„í„°ëŠ” <span style='color: #FF0000'>AbstractAuthenticationProcessingFilter</span>ì´ë‹¤.</p>\n<ul>\n<li><span style='color: #FF0000'>AbstractAuthenticationProcessingFilter</span>ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ <span style='color: #0000FF'>SecurityFilterChain</span>ì— ì§ì ‘ ë“¤ì–´ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>\n<li><span style='color: #FF0000'>UsernamePasswordAuthenticationFilter</span>ëŠ” ì´ë¥¼ ìƒì†ë°›ì€ í´ë˜ìŠ¤ì´ë‹¤.</li>\n</ul>\n<hr>\n<ul>\n<li><span style='color: #FF0000'>UsernamePasswordAuthenticationFilter</span> êµ¬ë™ ê³¼ì •</li>\n</ul>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFbUlEQVQ4y13ReUzTVxwA8C+KyAjHZMNlCaDb3GAeQ0HdhjinTlEmZioIOgamgOUobSn9tRyFkAlCy1lW6EHpAUXKURCKFTwQWq4eUECOQhCGVRFlIDpNjNO3FLN/9pJPvt9vXt573/cebPPc7uG9bec3277a4RP1w87DKf7eAQG7d3mfDw9fF3nmhF1QyLk1zq5f2gKAPVloiMDztJJoTg8vkt0piOFqOTF8/R9EyRiPVmv2oNWbAUIjcDavUg4DSvWGpSRf6lKS79WnSX6eKPMgeB0Psj4VeMJmw9YfrbdsdvdKrujpjC5qQ9GF11FkgQpFFahQZJ4SxZWpUXL9w+PJigcAF/ZssUFF/o5IF2s/Q96/tT18ry9qDduAmkIdjeSjTj6nwtc6OH1sE/N7JSgblRtadEuueBrrYBieHnLNsOwqbBn+nFvX5x48iiAZzwIYL0wI0uK8VpqDPR5fC/36ydVgzyetZz0ftYZ4vpyK312HSgGsAWwoHLV9rHTGN0oy9y2uzHgwiCEP/q1Evx8ve7gnoW5xf2Lt463ZfQhAJ8gK7ccCJ1TxRwZaYn/SNV481NdG8Ne2E45OjdP88wEuWVVNIajp+tOXcWUYJYp0iFppRBSxHpEE3Ygk6EGk8l6U1miuyVcvAoSwqtY7w/thyjznZ6SeCEPoicNJAEAAIOcXrbHMhYVFeyVncUNpWYKgxIyS8ylMcaCw2bCP29DjV1qnOZBfo3XntxgATh85YIsDWF20gu2jPMN86wajfLwRQnDeb4fjLh+f9S7OGz9wsHVyBwDL2R8BgAsA2OVd0UKeTA3Myk7IqtICu2kAgMTItT52Bud0+HioM3xPcoDNZ53tjpFtTwZfcPQLCLF3tLdft2n7d9btCFkF4Oh2h0II9gFR6Xb+ZyK+wGEs+4Ket9Ypkn4bRv20dXRJlxWco5RYmlsHAJ+6ALhvcrTy+jVLAYk1s5AgGll9CkyoATxfa0ltAOATAPjQ1cXZbxIhwJd2AUFmgiSFGWJ4/QDEQqUHVjtziqFc/DleoD9NFA8HYbUzgZTqydNU2YQ/AKwhc27vJUonaATxKNEiTjhEiirR0OMrhsmxgkFyDE9PIldPUyOym36B7Er15cTyXkQW9L4ll/e9I5f3viPyNP8QuV0osUJ/dwIhYNX0XMbEOoRJdM9oUsMLTKx7QasceE6T6F/QpAOWeoXMV7+JYjbzIadKE5kqM/anyIZvp1QZ79Al+jspsqHbDPlYX6p8Umj5nALFUGLujeUH9ErjOCbWmzCJwUQV6VZRyntNmFg/wbz1fDaWfYsJTFkXnSbuN9OlhnFMrDVhon6TJadXGubospFmy4aFDQP0y6rH8ylVxslk6eA0XWKYpksNqxETaaeTpQNTOW2L92OL2lnAahghZbf9NU3idxsJnI5hIlczHMe+acxonJvKaluuf40QFDXdTWN2/L1Mrx6Zo0oN5iSJwUwRac1JYp2ZXj1iTq2duM/sfPWUUKYuhiLFYH62av5NPPv6Ij7v6pIFLlu+yKiffH35xlKnpUN2gz4+Vzk3mCkf6UqXDXZbZFQbV6W/j5rcaw+0+LyWNODkM104OZc2yWW1bvVyhVt9jcKtsUHpJmQXu2dg2MZRy5WbJ9LTGmZexrBvPkrgdi8QuJqFBF7PAoHXvRDH6ViI43TOpynuryTwektBzOeDiFMKSmUHqK6rQaVSQ/stLcil1YB9BiB6iKCgVpuULh81p8qGxtPlYyZGzd1VGXUmk6VOqx6aYMjHZi/mteZAmVhhxa5styr+nzxhs1XxnWdrBdMI8q9oMukS7VOsouceVdg9+x+auG8Vhd95jybRzscUqlj/AvyT63jdCfp8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"usernamepasswordauthenticationfilter\"\n        title=\"usernamepasswordauthenticationfilter\"\n        src=\"/static/fd0df91bea140f5fd2545e9d547a7818/37523/usernamepasswordauthenticationfilter.png\"\n        srcset=\"/static/fd0df91bea140f5fd2545e9d547a7818/e9ff0/usernamepasswordauthenticationfilter.png 180w,\n/static/fd0df91bea140f5fd2545e9d547a7818/f21e7/usernamepasswordauthenticationfilter.png 360w,\n/static/fd0df91bea140f5fd2545e9d547a7818/37523/usernamepasswordauthenticationfilter.png 720w,\n/static/fd0df91bea140f5fd2545e9d547a7818/5d030/usernamepasswordauthenticationfilter.png 771w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<ul>\n<li>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ AbstractAuthenticationProcessingFilter ì— username, passwordë¥¼ ë°›ëŠ” ë¡œì§ê³¼ UsernamePasswordAuthenticationToken ë°œê¸‰í•˜ëŠ” ë¡œì§ì´ ì¶”ê°€ëœ êµ¬ì¡°ì…ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ê·¸ë¦¼ì„ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë“¯, RememberMeAuthenticationFilter ë¥¼ í†µí•´ ì´ ê¸°ëŠ¥ë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ì—¬ê¸°ì—ì„œ <span style='color: #ffd700'>SessionAuthenticationStrategy</span>ëŠ” ì¸ì¦ í›„ í›„ì† ì²˜ë¦¬ë¡œ ë™ì‹œì— ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<blockquote>\n<ul>\n<li>SessionManagementFilterì—ì„œ ì²˜ë¦¬í•˜ëŠ”ë°, <span style='color: #FF0000'>ë™ì‹œ ì ‘ì†, ì„¸ì…˜ ê³ ì • ë¬¸ì œ í•´ê²° ë“±</span>ì„ ì²˜ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤.</li>\n</ul>\n</blockquote>\n</li>\n</ul>\n<br>\n<h4><span style='background-color: #fff5b1'>ğŸ’¥ ìš°ë¦¬ëŠ” JWT ê¸°ë°˜ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•  ê²ƒì´ê¸° ë•Œë¬¸ì— Customí•œ Authentication ê³¼ì •ì„ UsernamePasswordAuthenticationFilter ì´ì „ì— ë“±ë¡í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</span></h4>\n<br>\n<hr>\n<br>\n<h2 id=\"span-stylebackground-color-ddffe4jwtfilterspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4jwtfilterspan\" aria-label=\"span stylebackground color ddffe4jwtfilterspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>JwtFilter</span></h2>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jwt<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>jwt<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">TokenProvider</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">lombok<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequiredArgsConstructor</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Authentication</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SecurityContextHolder</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringUtils</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>filter<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OncePerRequestFilter</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FilterChain</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServletException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletRequest</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletResponse</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtFilter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">OncePerRequestFilter</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JwtFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> AUTHORIZATION_HEADER <span class=\"token operator\">=</span> <span class=\"token string\">\"Authorization\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">TokenProvider</span> tokenProvider<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doFilterInternal</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> filterChain<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> jwt <span class=\"token operator\">=</span> <span class=\"token function\">resolveToken</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> requestURI <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestURI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// jwt ì¡´ì¬í•˜ê³  &amp;&amp; ìœ íš¨í•˜ë‹¤ë©´</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>jwt <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">&amp;&amp;</span> tokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span>jwt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JwtFilter with token : \"</span><span class=\"token punctuation\">,</span> jwt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// Authentication ê°€ì ¸ì˜¤ê¸°</span>\n            <span class=\"token class-name\">Authentication</span> authentication <span class=\"token operator\">=</span> tokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getAuthentication</span><span class=\"token punctuation\">(</span>jwt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// Contextì— Authentication ì €ì¥</span>\n            <span class=\"token class-name\">SecurityContextHolder</span><span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAuthentication</span><span class=\"token punctuation\">(</span>authentication<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            logger<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SecurityContextì— '{}' ì¸ì¦ ì •ë³´ë¥¼ ì €ì¥í–ˆìŠµë‹ˆë‹¤, uri : {}\"</span><span class=\"token punctuation\">,</span> authentication<span class=\"token punctuation\">,</span> requestURI<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// Do Next Filter</span>\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// Header ì—ì„œ í† í° êº¼ë‚´ê¸°</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> <span class=\"token function\">resolveToken</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">String</span> bearerToken <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getHeader</span><span class=\"token punctuation\">(</span>AUTHORIZATION_HEADER<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasText</span><span class=\"token punctuation\">(</span>bearerToken<span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bearer \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> bearerToken<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<h3 id=\"span-stylebackground-color-f1f8ffgenericfilterbean-vs-onceperrequestfilterspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffgenericfilterbean-vs-onceperrequestfilterspan\" aria-label=\"span stylebackground color f1f8ffgenericfilterbean vs onceperrequestfilterspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>GenericFilterBean VS OncePerRequestFilter</span></h3>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1genericfilterbeanspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1genericfilterbeanspan\" aria-label=\"span stylebackground color fff5b1genericfilterbeanspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>GenericFilterBean</span></h4>\n<br>\n<ul>\n<li>Spring ì— ë“±ë¡í•˜ê¸° ìœ„í•œ Filter ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¡°ê¸ˆ ë” í™•ì¥í•˜ì—¬ ìŠ¤í”„ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” í•„í„° ì¶”ìƒ í´ë˜ìŠ¤ì´ë‹¤.</li>\n<li>ìŠ¤í”„ë§ì—ì„œ ì œê³µí•˜ëŠ” í•„í„°ë¡œ ìŠ¤í”„ë§ì˜ ì„¤ì • ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</li>\n<li>ğŸ”¥ <span style='color: #FF0000'>ìš”ì²­ì˜ íë¦„ì— ë”°ë¼ ì´ í•„í„°ëŠ” 2ë²ˆ í˜¸ì¶œë  ìˆ˜ ë„ ìˆìŠµë‹ˆë‹¤.</span></li>\n</ul>\n<br>\n<h4 id=\"span-stylebackground-color-fff5b1onceperrequestfilterspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-fff5b1onceperrequestfilterspan\" aria-label=\"span stylebackground color fff5b1onceperrequestfilterspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #fff5b1'>OncePerRequestFilter</span></h4>\n<br>\n<ul>\n<li><span style='color: #FF0000'>OncePerRequestFilter</span>ëŠ” ìœ„ì™€ ê°™ì€ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œì„ ë°©ì§€í•˜ê¸° ìœ„í•´ GenericFilterBeanì„ ìƒì†ë°›ì•„ ë§Œë“¤ì–´ì§„ í´ë˜ìŠ¤ì´ë‹¤.</li>\n<li>ğŸ’¥ <span style='color: #0000FF'>í•œ ë²ˆì˜ ìš”ì²­ì—ì„œ ë°˜ë“œì‹œ í•œ ë²ˆë§Œ ìˆ˜í–‰ë˜ëŠ” Filterì´ë‹¤.</span></li>\n</ul>\n<p>ğŸŒŸ ë”°ë¼ì„œ, JwtFilterëŠ” ìš”ì²­ ë‹¹ í•œ ë²ˆë§Œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ OncePerRequestFilterë¥¼ ìƒì†ë°›ì•„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.</p>\n<br>\n<hr>\n<br>\n<h2 id=\"span-stylebackground-color-ddffe4exceptionhandlerspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4exceptionhandlerspan\" aria-label=\"span stylebackground color ddffe4exceptionhandlerspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>ExceptionHandler</span></h2>\n<br>\n<ul>\n<li>Spring Security Flowë¥¼ ë³´ë©´ ExceptionTranslationFilter AuthenticationExceptionê³¼ AccessDeniedExceptionì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ì´ë²ˆì—” ì´ ë‘ Exceptionì„ ì²˜ë¦¬í•  Handlerë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffauthenticationentrypointspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffauthenticationentrypointspan\" aria-label=\"span stylebackground color f1f8ffauthenticationentrypointspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>AuthenticationEntryPoint</span></h3>\n<br>\n<p>ğŸ“Œ AuthenticationEntryPoint êµ¬í˜„ì²´ JwtAuthenticationEntryPoint êµ¬í˜„</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AuthenticationEntryPoint</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServletException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletRequest</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletResponse</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAuthenticationEntryPoint</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AuthenticationEntryPoint</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JwtAuthenticationEntryPoint</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">commence</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">AuthenticationException</span> authException<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"UnAuthorized Error : {}\"</span><span class=\"token punctuation\">,</span> authException<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        response<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletResponse</span><span class=\"token punctuation\">.</span>SC_UNAUTHORIZED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        response<span class=\"token punctuation\">.</span><span class=\"token function\">sendError</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletResponse</span><span class=\"token punctuation\">.</span>SC_UNAUTHORIZED<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ì¸ì¦ ì‹¤íŒ¨\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br><br></p>\n<h3 id=\"span-stylebackground-color-f1f8ffaccessdeniedhandlerspan\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-f1f8ffaccessdeniedhandlerspan\" aria-label=\"span stylebackground color f1f8ffaccessdeniedhandlerspan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #f1f8ff'>AccessDeniedHandler</span></h3>\n<br>\n<p>ğŸ“Œ AccessDeniedHandler êµ¬í˜„ì²´ JwtAccessDeniedHandler êµ¬í˜„</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>access<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AccessDeniedException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>access<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">AccessDeniedHandler</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Component</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServletException</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletRequest</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>servlet<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HttpServletResponse</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IOException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JwtAccessDeniedHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">AccessDeniedHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JwtAccessDeniedHandler</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span>\n                       <span class=\"token class-name\">AccessDeniedException</span> accessDeniedException<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n        logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Forbidden Error : {}\"</span><span class=\"token punctuation\">,</span> accessDeniedException<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        response<span class=\"token punctuation\">.</span><span class=\"token function\">setStatus</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletResponse</span><span class=\"token punctuation\">.</span>SC_FORBIDDEN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        response<span class=\"token punctuation\">.</span><span class=\"token function\">sendError</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletResponse</span><span class=\"token punctuation\">.</span>SC_FORBIDDEN<span class=\"token punctuation\">,</span> <span class=\"token string\">\"ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<hr>\n<h2 id=\"span-stylebackground-color-ddffe4configuration-ë“±ë¡span\" style=\"position:relative;\"><a href=\"#span-stylebackground-color-ddffe4configuration-%EB%93%B1%EB%A1%9Dspan\" aria-label=\"span stylebackground color ddffe4configuration ë“±ë¡span permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><span style='background-color: #ddffe4'>Configuration ë“±ë¡</span></h2>\n<br>\n<p>ğŸŒŸ ì´ì œ ë§Œë“  TokenProvider, Filter, ExceptionHandlerë¥¼ ì„¤ì • íŒŒì¼ì—ì„œ ë“±ë¡í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@EnableWebSecurity</span> <span class=\"token comment\">// @Configuration + ì¶”ê°€ ëª‡ëª‡ ì„¤ì •</span>\n<span class=\"token annotation punctuation\">@EnableGlobalMethodSecurity</span><span class=\"token punctuation\">(</span>prePostEnabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// Method ë‹¨ìœ„ë¡œ @PreAuthorize, @PostAuthorize ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SecurityConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">WebSecurityConfigurerAdapter</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">TokenProvider</span> tokenProvider<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JwtAuthenticationEntryPoint</span> jwtAuthenticationEntryPoint<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">JwtAccessDeniedHandler</span> jwtAccessDeniedHandler<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SecurityConfig</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TokenProvider</span> tokenProvider<span class=\"token punctuation\">,</span>\n                          <span class=\"token class-name\">JwtAuthenticationEntryPoint</span> jwtAuthenticationEntryPoint<span class=\"token punctuation\">,</span>\n                          <span class=\"token class-name\">JwtAccessDeniedHandler</span> jwtAccessDeniedHandler<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tokenProvider <span class=\"token operator\">=</span> tokenProvider<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jwtAuthenticationEntryPoint <span class=\"token operator\">=</span> jwtAuthenticationEntryPoint<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>jwtAccessDeniedHandler <span class=\"token operator\">=</span> jwtAccessDeniedHandler<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// PasswordEncoder ë“±ë¡</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PasswordEncoder</span> <span class=\"token function\">passwordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BCryptPasswordEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token comment\">// web ì„¤ì •</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WebSecurity</span> web<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        web<span class=\"token punctuation\">.</span><span class=\"token function\">ignoring</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpMethod</span><span class=\"token punctuation\">.</span>OPTIONS<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/favicon.ico\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSecurity</span> http<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        http\n            <span class=\"token comment\">// CORS, CSRF ì„¤ì •</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">cors</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">csrf</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">disable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// ExceptionHandler ë“±ë¡</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">exceptionHandling</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">authenticationEntryPoint</span><span class=\"token punctuation\">(</span>jwtAuthenticationEntryPoint<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">accessDeniedHandler</span><span class=\"token punctuation\">(</span>jwtAccessDeniedHandler<span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// Session ì„¤ì • -> JWT ë°©ì‹ ë¡œê·¸ì¸ êµ¬í˜„ -> StateLess</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sessionManagement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sessionCreationPolicy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SessionCreationPolicy</span><span class=\"token punctuation\">.</span>STATELESS<span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// requestì˜ resource ì ‘ê·¼ ì œí•œ ì„¤ì •</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">authorizeHttpRequests</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">antMatchers</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">permitAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\">// JwtFilter ë“±ë¡ - tokenProvider ì£¼ì…í•´ì„œ ë“±ë¡í•œë‹¤.</span>\n            <span class=\"token comment\">// ì´ í•„í„°ëŠ” ì¸ì¦ í•„í„°ì¸ UsernamePasswordAuthenticationFilter ì „ì— ë“±ë¡í•´ì¤ë‹ˆë‹¤.</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">and</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">addFilterBefore</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">JwtFilter</span><span class=\"token punctuation\">(</span>tokenProvider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">UsernamePasswordAuthenticationFilter</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<ul>\n<li>êµ¬í˜„í•œ TokenProvider, JwtFilter, ExceptionHandlerë“¤ì„ ë“±ë¡í•˜ê³ , PasswordEncoder ë˜í•œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤ë‹ˆë‹¤.</li>\n</ul>\n<p><br><br></p>\n<p>ğŸ”¥ ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Controllerì—ì„œë¶€í„° ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œ ìˆ˜í–‰í•  ì½”ë“œë“¤ì„ ì‘ì„±í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.</p>\n<p>ğŸŒˆ ëª¨ë“  ì½”ë“œëŠ” <a href=\"https://github.com/JunHyxxn/SecurityJwtLogin\">junhyxxn GitHub</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!!</p>\n<br>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4spring-security-filterspan\"><span style='background-color: #ddffe4'>Spring Security Filter</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-f1f8ffusernamepasswordauthenticationfilterspan\"><span style='background-color: #f1f8ff'>UsernamePasswordAuthenticationFilter</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4jwtfilterspan\"><span style='background-color: #ddffe4'>JwtFilter</span></a></p>\n<ul>\n<li>\n<p><a href=\"#span-stylebackground-color-f1f8ffgenericfilterbean-vs-onceperrequestfilterspan\"><span style='background-color: #f1f8ff'>GenericFilterBean VS OncePerRequestFilter</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-fff5b1genericfilterbeanspan\"><span style='background-color: #fff5b1'>GenericFilterBean</span></a></li>\n<li><a href=\"#span-stylebackground-color-fff5b1onceperrequestfilterspan\"><span style='background-color: #fff5b1'>OncePerRequestFilter</span></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4exceptionhandlerspan\"><span style='background-color: #ddffe4'>ExceptionHandler</span></a></p>\n<ul>\n<li><a href=\"#span-stylebackground-color-f1f8ffauthenticationentrypointspan\"><span style='background-color: #f1f8ff'>AuthenticationEntryPoint</span></a></li>\n<li><a href=\"#span-stylebackground-color-f1f8ffaccessdeniedhandlerspan\"><span style='background-color: #f1f8ff'>AccessDeniedHandler</span></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#span-stylebackground-color-ddffe4configuration-%EB%93%B1%EB%A1%9Dspan\"><span style='background-color: #ddffe4'>Configuration ë“±ë¡</span></a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"December 06, 2022","title":"SecurityJwtLogin - 5 [JWT Filter & ExceptionHandler]","categories":"Spring-Security Spring-Boot Jwt Login TIL","author":"JunHyxxn","emoji":"ğŸ”"},"fields":{"slug":"/securityjwtlogin-5/"}},"site":{"siteMetadata":{"siteUrl":"https://www.JunHyxxn.com","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/securityjwtlogin-4/","nextSlug":"/securityjwtlogin-3/","prevSlug":"/securityjwtlogin-5/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}